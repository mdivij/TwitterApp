<html>
	<head>

		<title>Twitter</title>

		<!-- Framework -->
			<!-- JS -->
				<script src="js/stockrender-apprender.1.0.0.min.js"></script>
		<!-- Framework -->

		<!-- Supplementary Code -->
			<!-- JS -->
				<script src="js/mainTwitterv2.js"></script>

			<!-- CSS -->
				<link rel="stylesheet" type="text/css" href="css/style.css">
					
			<!-- Bootstrap -->
				<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
				<script src="js/bootstrap.min.js"></script>
			
				<script src="js/jquery-2.1.3.min.js"></script> 
				<script src="js/jquery.autocomplete.min.js"></script>

	<script>
		function Marcin(){
				$('#news').empty();
				// Removes previous search

				var ticker = (document.getElementById("autocomplete").value); //Gets user input
				var ticker = ticker.toUpperCase(); //Changes user input to uppercase letters
				var http = "https://www.kimonolabs.com/api/ondemand/5fhznm62?apikey=l6rQ95UcRiqvLPJOL6M8bIRPjaEjy46a&q=%24" + ticker;
				console.log(ticker) //Logs user input for testing

			$.ajax({
				"url":http,
				"crossDomain":true,
				"dataType":"jsonp",
				//Make a call to the Kimono API following the "url" 
				    
				'success': function(response){ 
				    // If the call request was successful and the data was retrieved, this function will create a list displaying the data
				        
				    // $(".panel-heading").html(response.name);
				    // //Puts the API name into the panel heading  
				        
				    var collection = response.results.collection1;
				    for (var i = 0; i < collection.length; i++){   
				    // Traverses through every element in the entire collection
				        
				        $(".list-group").append('<li class="list-group-item">' + '<img src = \"' + collection[i].property1.src + '"\" style = "width:30px;height:30px">' + " " + '<a href=\"' + collection[i].property2.href + '\" target = "_blank">' + collection[i].property2.text + '</a>' + " " + collection[i].property4.text + '</li>');
				        // adds the text and the links from the first property into the list
				        
				        $(".list-group").append('<li class="list-group-item">' + collection[i].property3.text + '</li>');
				        // adds the text and the links from the first property into the list
				    }
				}
				  	// error: function(err){
       //    				alert('error!');
      	// 			} 
     				// If the call request was unsuccessful and the data wasn't retrieved, this function displays an error message
			})
		}
	</script>

	<form>			
		<style>
			.container{
    			padding: 5%
			}
		</style>

		<div class="container padding">
		<div class="panel panel-info" background-color = "red" id = "header">
		<div class="panel-heading"> 

		<form>
			<input id="autocomplete" type="textbox" name="ticker" value = ""></input>
			<button type = "button" onclick = "Marcin()">Submit</button>
			<!-- <button type = "button" onclick = "history.go(0)">Refresh</button> -->
			&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
			&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
			&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
			&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
			&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  
			Recent Tweets from <a href="https://www.twitter.com" target = "_blank">Twitter</a> &nbsp;
			<img src="files/twitter_logo.png" style="width:20px;height:20px">
		</form>
		</div>
			<ul class="list-group" id = "news"></ul>
		</div>
		</div>
		</form>
	</head>
</html>